{"version":3,"sources":["../../../../src/app/loading/page.tsx","../../../../src/lib/scoring.ts","../../../../src/lib/quiz-mapper.ts","../../../../src/lib/constants.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useRef, useCallback, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { generateRecommendations } from '@/lib/scoring';\nimport { buildProfileFromQuiz } from '@/lib/quiz-mapper';\nimport eventsData from '@/data/events.json';\nimport exhibitorsData from '@/data/exhibitors.json';\nimport type { Event, Exhibitor, UserRole } from '@/lib/types';\nimport { ROLE_LABEL_MAP, DENSITY_LABEL_MAP, INTEREST_LABEL_MAP, MISSION_LABEL_MAP } from '@/lib/constants';\nimport { supabase } from '@/lib/supabase';\n\n// ---------------------------------------------------------------------------\n// Terminal animation line type\n// ---------------------------------------------------------------------------\n\ninterface TerminalLine {\n  text: string;\n  isSuccess: boolean;\n}\n\n// ---------------------------------------------------------------------------\n// Constants\n// ---------------------------------------------------------------------------\n\nconst LINE_DELAY_MS = 400;\nconst REDIRECT_DELAY_MS = 500;\n\n// ---------------------------------------------------------------------------\n// Quiz ID -> scoring engine value mappings\n// ---------------------------------------------------------------------------\n\nconst ROLE_ID_MAP: Record<string, UserRole> = {\n  'founder-cxo': 'founder',\n  'investor-vc': 'investor',\n  'product-leader': 'product',\n  'engineer-researcher': 'engineer',\n  'policy-government': 'policy',\n  'student-academic': 'student',\n};\n\n// ---------------------------------------------------------------------------\n// Dynamic terminal line generator\n// ---------------------------------------------------------------------------\n\nfunction buildTerminalLines(quizAnswers: Record<string, unknown> | null): TerminalLine[] {\n  // Line 1: always static\n  const lines: TerminalLine[] = [\n    { text: '> Initializing AI Impact Summit Planner...', isSuccess: false },\n  ];\n\n  // Line 2: role\n  const roleId = quizAnswers?.role as string | undefined;\n  const roleLabel = roleId ? ROLE_LABEL_MAP[roleId] : null;\n  lines.push({\n    text: roleLabel\n      ? `> Reading your profile... (matched: ${roleLabel})`\n      : '> Loading profile data...',\n    isSuccess: false,\n  });\n\n  // Line 3: number of days\n  const dates = (quizAnswers?.dates as string[] | undefined) || [];\n  const dayCount = dates.length;\n  lines.push({\n    text: dayCount > 0\n      ? `> Filtering 463 events across ${dayCount} day${dayCount === 1 ? '' : 's'}...`\n      : '> Scanning 463 events across 5 days...',\n    isSuccess: false,\n  });\n\n  // Line 4: interests\n  const interestIds = (quizAnswers?.interests as string[] | undefined) || [];\n  const interestLabels = interestIds\n    .map((id) => INTEREST_LABEL_MAP[id] || id)\n    .filter(Boolean);\n  lines.push({\n    text: interestLabels.length > 0\n      ? `> Scoring against your interests: ${interestLabels.join(', ')}...`\n      : '> Matching keywords and personas...',\n    isSuccess: false,\n  });\n\n  // Line 5: networking density or fallback\n  const densityId = quizAnswers?.networking_density as string | undefined;\n  const densityLabel = densityId ? DENSITY_LABEL_MAP[densityId] : null;\n  lines.push({\n    text: densityLabel\n      ? `> Identifying ${densityLabel}...`\n      : '> Scanning heavy hitter sessions...',\n    isSuccess: false,\n  });\n\n  // Lines 6-9: static\n  lines.push({ text: '> Calculating ROI scores for top candidates...', isSuccess: false });\n  lines.push({ text: '> Resolving time conflicts...', isSuccess: false });\n  lines.push({ text: '> Generating icebreakers and strategy...', isSuccess: false });\n  lines.push({ text: '> Building your personalized plan...', isSuccess: false });\n\n  // Line 10: success\n  lines.push({ text: '\\u2713 Strategy complete! Redirecting...', isSuccess: true });\n\n  return lines;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\nexport default function LoadingStrategyPage() {\n  const router = useRouter();\n  const [visibleLines, setVisibleLines] = useState(0);\n  const [scoringDone, setScoringDone] = useState(false);\n  const [animationDone, setAnimationDone] = useState(false);\n  const hasStartedScoring = useRef(false);\n  const terminalRef = useRef<HTMLDivElement>(null);\n  const planIdRef = useRef<string>('local');\n\n  // Read quizAnswers once for building dynamic terminal lines\n  const terminalLines = useMemo<TerminalLine[]>(() => {\n    if (typeof window === 'undefined') return buildTerminalLines(null);\n    try {\n      const raw = localStorage.getItem('quizAnswers');\n      return buildTerminalLines(raw ? JSON.parse(raw) : null);\n    } catch {\n      return buildTerminalLines(null);\n    }\n  }, []);\n\n  // Run the scoring engine once on mount\n  const runScoring = useCallback(async () => {\n    if (hasStartedScoring.current) return;\n    hasStartedScoring.current = true;\n\n    try {\n      // Read quiz answers from localStorage\n      const quizRaw = localStorage.getItem('quizAnswers');\n\n      if (!quizRaw) {\n        router.replace('/');\n        return;\n      }\n\n      const quizAnswers = JSON.parse(quizRaw);\n\n      // Read dates: prefer quizAnswers.dates, fall back to separate selectedDates key\n      let selectedDates: string[] = [];\n      if (Array.isArray(quizAnswers.dates) && quizAnswers.dates.length > 0) {\n        selectedDates = quizAnswers.dates;\n      } else {\n        const datesRaw = localStorage.getItem('selectedDates');\n        if (datesRaw) {\n          selectedDates = JSON.parse(datesRaw);\n        }\n      }\n\n      if (selectedDates.length === 0) {\n        router.replace('/');\n        return;\n      }\n\n      let plan;\n\n      if (quizAnswers.mode === 'profile') {\n        const profile = buildProfileFromQuiz(\n          'founder',\n          ['llms_foundation', 'enterprise_ai'],\n          ['networking'],\n          selectedDates\n        );\n        plan = generateRecommendations(\n          eventsData as Event[],\n          exhibitorsData as Exhibitor[],\n          profile\n        );\n      } else {\n        const role: UserRole = ROLE_ID_MAP[quizAnswers.role] || 'founder';\n        const focusAreas: string[] = quizAnswers.interests || [];\n        const missions: string[] = quizAnswers.missions || [];\n\n        const profile = buildProfileFromQuiz(\n          role,\n          focusAreas,\n          missions,\n          selectedDates,\n          undefined,\n          quizAnswers.technical_depth || null,\n          quizAnswers.networking_density || null,\n          quizAnswers.org_size || null,\n          quizAnswers.sectors || null,\n          quizAnswers.deal_breakers || null,\n        );\n\n        plan = generateRecommendations(\n          eventsData as Event[],\n          exhibitorsData as Exhibitor[],\n          profile\n        );\n      }\n\n      // Always keep localStorage as fallback (full plan for local use)\n      localStorage.setItem('planResult', JSON.stringify(plan));\n\n      // Save slim version to Supabase (just IDs + tiers + scores)\n      try {\n        // Build id-based lookup for fallback_for resolution (event_id → id)\n        const eidToId = new Map(\n          plan.schedule.flatMap((d) => d.events.map((se) => [se.event.event_id, se.event.id]))\n        );\n\n        const slimEvents = plan.schedule.flatMap((day) =>\n          day.events.map((se) => ({\n            id: se.event.id,\n            tier: se.tier,\n            score: se.score,\n            pinned: false,\n            is_fallback: se.isFallback,\n            fallback_for: se.fallbackFor ? (eidToId.get(se.fallbackFor) ?? null) : null,\n          }))\n        );\n        const exhibitorIds = plan.exhibitors.map((e) => e.exhibitor.id);\n\n        let saved = false;\n\n        // Try with user_name first\n        const { data, error } = await supabase\n          .from('user_plans')\n          .insert({\n            headline: plan.headline,\n            strategy_note: plan.strategyNote,\n            events: slimEvents,\n            exhibitor_ids: exhibitorIds,\n            user_name: quizAnswers.user_name || '',\n          })\n          .select('id')\n          .single();\n\n        if (!error && data?.id) {\n          planIdRef.current = data.id;\n          localStorage.setItem('lastPlanId', data.id);\n          saved = true;\n        }\n\n        // Retry without user_name if the column doesn't exist yet\n        if (!saved && error) {\n          console.warn('Supabase insert failed, retrying without user_name:', error.message);\n          const { data: d2, error: e2 } = await supabase\n            .from('user_plans')\n            .insert({\n              headline: plan.headline,\n              strategy_note: plan.strategyNote,\n              events: slimEvents,\n              exhibitor_ids: exhibitorIds,\n            })\n            .select('id')\n            .single();\n\n          if (!e2 && d2?.id) {\n            planIdRef.current = d2.id;\n            localStorage.setItem('lastPlanId', d2.id);\n          } else {\n            console.warn('Supabase fallback also failed:', e2?.message);\n          }\n        }\n      } catch (e) {\n        console.warn('Supabase save failed, using local fallback:', e);\n      }\n\n      setScoringDone(true);\n    } catch (err) {\n      console.error('Scoring engine error:', err);\n      setScoringDone(true);\n    }\n  }, [router]);\n\n  // Start scoring on mount\n  useEffect(() => {\n    runScoring();\n  }, [runScoring]);\n\n  // Terminal animation: reveal lines one by one\n  useEffect(() => {\n    if (visibleLines >= terminalLines.length) {\n      setAnimationDone(true);\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setVisibleLines((prev) => prev + 1);\n    }, LINE_DELAY_MS);\n\n    return () => clearTimeout(timer);\n  }, [visibleLines, terminalLines.length]);\n\n  // Auto-scroll terminal to bottom as new lines appear\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [visibleLines]);\n\n  // Navigate once both animation and scoring are done\n  useEffect(() => {\n    if (animationDone && scoringDone) {\n      const timer = setTimeout(() => {\n        router.push(`/plan/${planIdRef.current}`);\n      }, REDIRECT_DELAY_MS);\n      return () => clearTimeout(timer);\n    }\n  }, [animationDone, scoringDone, router]);\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-white px-4\">\n      {/* Terminal card */}\n      <div className=\"w-full max-w-xl\">\n        {/* Terminal window */}\n        <div className=\"overflow-hidden rounded-xl shadow-[0_8px_24px_rgba(0,0,0,0.08),0_2px_6px_rgba(0,0,0,0.04)]\">\n          {/* Title bar */}\n          <div className=\"flex items-center gap-[6px] bg-[#2A2A28] p-3\">\n            {/* Traffic light dots */}\n            <div className=\"h-[10px] w-[10px] rounded-full bg-[#FF5F57]\" />\n            <div className=\"h-[10px] w-[10px] rounded-full bg-[#FFBD2E]\" />\n            <div className=\"h-[10px] w-[10px] rounded-full bg-[#28CA42]\" />\n            <span className=\"ml-2 font-[family-name:var(--font-mono)] text-xs text-[#8A8A87]\">\n              AI Impact Summit Planner v1.0\n            </span>\n          </div>\n\n          {/* Terminal body */}\n          <div\n            ref={terminalRef}\n            className=\"min-h-[280px] max-h-[400px] overflow-y-auto bg-[#1A1A19] p-5 font-[family-name:var(--font-mono)] text-[13px] leading-8 text-[#A0A09D]\"\n          >\n            {terminalLines.slice(0, visibleLines).map((line, index) => {\n              const isCurrentLine = index === visibleLines - 1;\n              const isLastLine = index === terminalLines.length - 1;\n\n              return (\n                <div\n                  key={index}\n                  className={`animate-fade-in-up ${\n                    line.isSuccess ? 'font-semibold text-[#059669]' : ''\n                  }`}\n                >\n                  {line.text}\n                  {/* Blinking cursor on the current line (not the success line) */}\n                  {isCurrentLine && !isLastLine && (\n                    <span className=\"terminal-cursor\" />\n                  )}\n                </div>\n              );\n            })}\n\n            {/* Blinking cursor when no lines yet */}\n            {visibleLines === 0 && (\n              <div>\n                <span className=\"terminal-cursor\" />\n              </div>\n            )}\n          </div>\n\n          {/* Progress bar inside terminal */}\n          <div className=\"mx-5 mb-5 mt-3 h-[2px] overflow-hidden rounded-full bg-[#2A2A28]\">\n            <div\n              className=\"h-full rounded-full bg-[#4338CA] transition-all duration-500 ease-out\"\n              style={{\n                width: `${(visibleLines / terminalLines.length) * 100}%`,\n              }}\n            />\n          </div>\n        </div>\n\n        {/* Status text below terminal */}\n        <p className=\"mt-4 text-center text-[13px] text-[#8A8A87]\">\n          {animationDone && scoringDone\n            ? 'Redirecting to your strategy...'\n            : animationDone && !scoringDone\n              ? 'Finalizing calculations...'\n              : 'Building your personalized strategy'}\n        </p>\n      </div>\n    </div>\n  );\n}\n","// ============================================================\n// AI Summit Strategist - Scoring Engine\n// ============================================================\n\nimport type {\n  Event,\n  Exhibitor,\n  UserProfile,\n  ScoredEvent,\n  ScoredExhibitor,\n  AlternativeEvent,\n  Tier,\n  DaySchedule,\n  RecommendationPlan,\n  Keyword,\n} from './types';\n\n// --- Constants ---\n\n// New scoring weights (total positive max = 100)\nconst MAX_PERSONA_SCORE = 20;\nconst MAX_KEYWORD_SCORE = 20;\nconst MAX_GOAL_RELEVANCE_SCORE = 15;\nconst MAX_NETWORKING_SIGNAL_SCORE = 15;\nconst MAX_DEPTH_SCORE = 10;\nconst MAX_SECTOR_SCORE = 10;\nconst MAX_SENIORITY_SCORE = 10;\nconst DEAL_BREAKER_PENALTY = -40;\n\nconst EXACT_KEYWORD_POINTS = 4;\nconst CATEGORY_KEYWORD_POINTS = 2;\n\nconst EXACT_PERSONA_POINTS = 7;\n\nconst EXHIBITOR_MAX_KEYWORD_SCORE = 60;\nconst EXHIBITOR_EXACT_KEYWORD_POINTS = 10;\nconst EXHIBITOR_CATEGORY_KEYWORD_POINTS = 5;\nconst EXHIBITOR_MAX_PERSONA_SCORE = 40;\nconst EXHIBITOR_EXACT_PERSONA_POINTS = 10;\n\nconst TOP_EXHIBITORS = 5;\n\n// Per-day candidate pool: generous pool so greedy scheduler can fill the day\n// and still have plenty of alternatives per slot\nconst CANDIDATES_PER_DAY = 30;\nconst MAX_ALTERNATIVES_PER_SLOT = 10;\n\n// --- Goal Relevance Mapping ---\n// Maps quiz mission IDs to event goal_relevance values\n\nconst MISSION_TO_GOAL_MAP: Record<string, string[]> = {\n  hiring: ['hiring'],\n  fundraising: ['fundraising'],\n  sales: ['sales', 'partnerships'],\n  upskilling: ['upskilling'],\n  networking: ['networking'],\n};\n\n// --- Sector to Keyword Category Mapping ---\n\nconst SECTOR_CATEGORY_MAP: Record<string, string[]> = {\n  developer_tools: ['AI Technology & Architecture'],\n  fintech: ['Business & Entrepreneurship'],\n  healthcare: ['Social Impact & Inclusion'],\n  ecommerce: ['Industry Applications'],\n  edtech: ['Skills & Workforce Development'],\n  manufacturing: ['Industry Applications'],\n  agriculture: ['Social Impact & Inclusion'],\n  defense: ['Geopolitics & Global Strategy'],\n  media: ['Digital Transformation & Services'],\n  government: ['AI Governance & Ethics'],\n};\n\n// --- Headline Map ---\n\nconst ROLE_HEADLINES: Record<string, string> = {\n  founder: 'The Founder Track',\n  investor: 'The Investor Track',\n  product: 'The Product Leader Track',\n  engineer: 'The Engineer Track',\n  policy: 'The Policy & Governance Track',\n  student: 'The Explorer Track',\n};\n\nconst ROLE_STRATEGY_NOTES: Record<string, string> = {\n  founder:\n    'Your schedule prioritizes high-density networking rooms with decision makers, investors, and potential partners. We have identified sessions where you can make the connections that matter most for your venture.',\n  investor:\n    'Your schedule focuses on deal-flow rich sessions featuring promising startups, government policy shifts, and emerging technology trends. Expect to meet founders, co-investors, and policy makers shaping the AI landscape.',\n  product:\n    'Your schedule balances implementation-focused sessions with strategic networking opportunities. We have targeted rooms where you can learn from practitioners and connect with potential collaborators.',\n  engineer:\n    'Your schedule leans into technically deep sessions and research talks while ensuring you still meet the people building cutting-edge AI. Expect a mix of learning and high-quality peer networking.',\n  policy:\n    'Your schedule is built around governance, regulation, and responsible AI discussions where you will find fellow policy leaders, government officials, and thought leaders shaping AI frameworks.',\n  student:\n    'Your schedule mixes accessible learning sessions with high-profile keynotes so you can both upskill and start building your professional network in the AI ecosystem.',\n};\n\n// --- Scoring Functions ---\n\n/**\n * Calculate keyword match score between event keywords and user keyword interests.\n * Exact keyword match = exactPoints, same category only = categoryPoints.\n * Capped at maxScore.\n */\nfunction computeKeywordScore(\n  itemKeywords: Keyword[],\n  userKeywords: Keyword[],\n  maxScore: number,\n  exactPoints: number,\n  categoryPoints: number\n): number {\n  let score = 0;\n\n  for (const userKw of userKeywords) {\n    for (const itemKw of itemKeywords) {\n      if (\n        userKw.keyword.toLowerCase() === itemKw.keyword.toLowerCase() &&\n        userKw.category.toLowerCase() === itemKw.category.toLowerCase()\n      ) {\n        // Exact match on both keyword and category\n        score += exactPoints;\n      } else if (\n        userKw.category.toLowerCase() === itemKw.category.toLowerCase()\n      ) {\n        // Same category, different keyword\n        score += categoryPoints;\n      }\n    }\n  }\n\n  return Math.min(score, maxScore);\n}\n\n/**\n * Calculate persona match score.\n * Exact string match = pointsPerMatch per match.\n * Capped at maxScore.\n */\nfunction computePersonaScore(\n  itemPersonas: string[],\n  userPersonas: string[],\n  maxScore: number,\n  pointsPerMatch: number\n): number {\n  let score = 0;\n\n  const normalizedUserPersonas = userPersonas.map((p) => p.toLowerCase());\n\n  for (const persona of itemPersonas) {\n    if (normalizedUserPersonas.includes(persona.toLowerCase())) {\n      score += pointsPerMatch;\n    }\n  }\n\n  return Math.min(score, maxScore);\n}\n\n/**\n * Calculate goal relevance score.\n * Checks if event's goal_relevance array matches user's missions.\n * If missions is null/empty (user skipped step 4), defaults to [\"networking\"]\n * and gives half weight.\n */\nfunction computeGoalRelevanceScore(\n  eventGoalRelevance: string[],\n  userMissions: string[]\n): number {\n  const isDefaulted = !userMissions || userMissions.length === 0;\n  const effectiveMissions = isDefaulted ? ['networking'] : userMissions;\n  const weightMultiplier = isDefaulted ? 0.5 : 1.0;\n\n  if (!eventGoalRelevance || eventGoalRelevance.length === 0) {\n    return 0;\n  }\n\n  const normalizedEventGoals = eventGoalRelevance.map((g) => g.toLowerCase());\n  let matchCount = 0;\n\n  for (const mission of effectiveMissions) {\n    const goalValues = MISSION_TO_GOAL_MAP[mission.toLowerCase()];\n    if (!goalValues) continue;\n\n    for (const goalValue of goalValues) {\n      if (normalizedEventGoals.includes(goalValue.toLowerCase())) {\n        matchCount++;\n        break; // Count each mission only once\n      }\n    }\n  }\n\n  if (matchCount === 0) return 0;\n\n  // Scale: 1 match = 60% of max, 2+ matches = 100% of max\n  const rawScore =\n    matchCount >= 2 ? MAX_GOAL_RELEVANCE_SCORE : MAX_GOAL_RELEVANCE_SCORE * 0.6;\n\n  return Math.round(rawScore * weightMultiplier);\n}\n\n/**\n * Calculate networking signal score based on user's networkingDensity preference.\n * - \"high_power\": +15 if decision_maker_density === \"High\" AND is_heavy_hitter, +8 if just one matches\n * - \"high_volume\": +15 for events at \"Bharat Mandapam\" main venue, +5 for any other large venue\n * - \"balanced\" or null: +7.5 flat (half of max, no special boosting)\n */\nfunction computeNetworkingSignalScore(\n  event: Event,\n  networkingDensity: 'high_power' | 'high_volume' | 'balanced' | undefined | null\n): number {\n  const preference = networkingDensity || 'balanced';\n\n  if (preference === 'high_power') {\n    const isHighDensity =\n      event.networking_signals.decision_maker_density === 'High';\n    const isHeavyHitter = event.networking_signals.is_heavy_hitter;\n\n    if (isHighDensity && isHeavyHitter) {\n      return MAX_NETWORKING_SIGNAL_SCORE; // 15\n    } else if (isHighDensity || isHeavyHitter) {\n      return 8;\n    }\n    return 0;\n  }\n\n  if (preference === 'high_volume') {\n    const venue = (event.venue || '').toLowerCase();\n    if (venue.includes('bharat mandapam') && !venue.includes('expo')) {\n      return MAX_NETWORKING_SIGNAL_SCORE; // 15\n    }\n    // Any other large venue (Bharat Mandapam Expo Area, etc.)\n    if (venue.includes('bharat mandapam') || venue.includes('expo')) {\n      return 5;\n    }\n    return 0;\n  }\n\n  // \"balanced\" or null/undefined: flat half-max\n  return Math.round(MAX_NETWORKING_SIGNAL_SCORE * 0.5); // 7.5 -> 8\n}\n\n/**\n * Calculate sector match score.\n * Checks if event keywords match user's selected sectors via category mapping.\n * If sectors is null/empty, returns 0.\n */\nfunction computeSectorScore(\n  eventKeywords: Keyword[],\n  userSectors: string[] | undefined | null\n): number {\n  if (!userSectors || userSectors.length === 0) {\n    return 0;\n  }\n\n  const eventCategories = new Set(\n    eventKeywords.map((kw) => kw.category.toLowerCase())\n  );\n\n  let matchCount = 0;\n\n  for (const sector of userSectors) {\n    const matchingCategories = SECTOR_CATEGORY_MAP[sector.toLowerCase()];\n    if (!matchingCategories) continue;\n\n    for (const category of matchingCategories) {\n      if (eventCategories.has(category.toLowerCase())) {\n        matchCount++;\n        break; // Count each sector only once\n      }\n    }\n  }\n\n  if (matchCount === 0) return 0;\n\n  // Scale: 1 match = 50% of max, 2 matches = 80%, 3+ = 100%\n  if (matchCount >= 3) return MAX_SECTOR_SCORE;\n  if (matchCount === 2) return Math.round(MAX_SECTOR_SCORE * 0.8);\n  return Math.round(MAX_SECTOR_SCORE * 0.5);\n}\n\n/**\n * Calculate speaker seniority score.\n * Simple heuristic based on title keywords in the speakers string.\n */\nfunction computeSeniorityScore(speakers: string): number {\n  if (!speakers) return 0;\n\n  const upper = speakers.toUpperCase();\n\n  // Highest tier: C-suite, Ministers, Secretary-level, Chairman\n  const highTitles = ['CEO', 'CTO', 'CXO', 'MINISTER', 'SECRETARY', 'DIRECTOR GENERAL', 'CHAIRMAN', 'CHAIRPERSON'];\n  for (const title of highTitles) {\n    if (upper.includes(title)) {\n      return MAX_SENIORITY_SCORE; // 10\n    }\n  }\n\n  // Mid tier: VP, Director, Head, Partner\n  const midTitles = ['VP', 'VICE PRESIDENT', 'DIRECTOR', 'HEAD', 'PARTNER'];\n  for (const title of midTitles) {\n    if (upper.includes(title)) {\n      return 7;\n    }\n  }\n\n  // Lower tier: Manager, Lead, Principal\n  const lowerTitles = ['MANAGER', 'LEAD', 'PRINCIPAL'];\n  for (const title of lowerTitles) {\n    if (upper.includes(title)) {\n      return 4;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * Calculate deal breaker penalty.\n * Each matching deal breaker applies DEAL_BREAKER_PENALTY (-40). Multiple can stack.\n */\nfunction computeDealBreakerPenalty(\n  event: Event,\n  dealBreakers: string[] | undefined | null\n): number {\n  if (!dealBreakers || dealBreakers.length === 0) {\n    return 0;\n  }\n\n  let penalty = 0;\n\n  for (const breaker of dealBreakers) {\n    switch (breaker.toLowerCase()) {\n      case 'pure_policy': {\n        const hasGovernanceCategory = event.keywords.some(\n          (kw) => kw.category.toLowerCase() === 'ai governance & ethics'\n        );\n        if (hasGovernanceCategory && event.technical_depth <= 2) {\n          penalty += DEAL_BREAKER_PENALTY;\n        }\n        break;\n      }\n      case 'highly_technical': {\n        if (event.technical_depth >= 4) {\n          penalty += DEAL_BREAKER_PENALTY;\n        }\n        break;\n      }\n      case 'global_south': {\n        const hasGlobalSouth = event.keywords.some(\n          (kw) => kw.keyword.toLowerCase().includes('global south')\n        );\n        if (hasGlobalSouth) {\n          penalty += DEAL_BREAKER_PENALTY;\n        }\n        break;\n      }\n      case 'large_keynote': {\n        const sessionType = (event.session_type || '').toLowerCase();\n        if (sessionType.includes('keynote') || sessionType.includes('plenary')) {\n          penalty += DEAL_BREAKER_PENALTY;\n        }\n        break;\n      }\n      case 'sushma_swaraj_bhavan': {\n        if ((event.venue || '').toLowerCase().includes('sushma swaraj bhavan')) {\n          penalty += DEAL_BREAKER_PENALTY;\n        }\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  return penalty;\n}\n\n/**\n * Score a single event against a user profile.\n * Returns a ScoredEvent with score breakdown. Tier and fallback fields are\n * populated later during plan generation.\n *\n * Scoring weights:\n * - Persona match: 20pts\n * - Keyword/interest match: 20pts\n * - Goal relevance: 15pts\n * - Networking signal match: 15pts\n * - Technical depth fit: 10pts\n * - Sector match: 10pts\n * - Speaker seniority: 10pts\n * - Deal breaker penalty: -40pts per match\n */\nexport function scoreEvent(event: Event, profile: UserProfile): ScoredEvent {\n  const zeroBreakdown = {\n    keywordScore: 0,\n    personaScore: 0,\n    depthScore: 0,\n    heavyHitterBonus: 0,\n    goalRelevanceScore: 0,\n    networkingSignalScore: 0,\n    sectorScore: 0,\n    dealBreakerPenalty: 0,\n  };\n\n  // Hard filter: if the event date is not in the user's available dates, score is 0\n  if (!profile.availableDates.includes(event.date)) {\n    return {\n      event,\n      score: 0,\n      breakdown: zeroBreakdown,\n      tier: 'Wildcard',\n      isFallback: false,\n    };\n  }\n\n  // Keyword matching (20pts max)\n  const keywordScore = computeKeywordScore(\n    event.keywords,\n    profile.keywordInterests,\n    MAX_KEYWORD_SCORE,\n    EXACT_KEYWORD_POINTS,\n    CATEGORY_KEYWORD_POINTS\n  );\n\n  // Persona matching (20pts max)\n  const personaScore = computePersonaScore(\n    event.target_personas,\n    profile.personaInterests,\n    MAX_PERSONA_SCORE,\n    EXACT_PERSONA_POINTS\n  );\n\n  // Technical depth (10pts max)\n  const depthDiff = Math.abs(\n    event.technical_depth - profile.technicalDepthPreference\n  );\n  let depthScore: number;\n  if (depthDiff === 0) {\n    depthScore = MAX_DEPTH_SCORE; // 10\n  } else if (depthDiff === 1) {\n    depthScore = 5;\n  } else if (depthDiff === 2) {\n    depthScore = 2;\n  } else {\n    depthScore = 0;\n  }\n\n  // Heavy hitter bonus (legacy field, kept for backward compat; now folded into networking signal)\n  const heavyHitterBonus = 0;\n\n  // Goal relevance (15pts max)\n  const goalRelevanceScore = computeGoalRelevanceScore(\n    event.goal_relevance,\n    profile.missions\n  );\n\n  // Networking signal (15pts max)\n  const networkingSignalScore = computeNetworkingSignalScore(\n    event,\n    profile.networkingDensity\n  );\n\n  // Sector match (10pts max)\n  const sectorScore = computeSectorScore(event.keywords, profile.sectors);\n\n  // Speaker seniority (10pts max, added to total but not in breakdown as separate named field\n  // -- we fold it into networkingSignalScore for simplicity? No, spec says separate.)\n  // Actually spec says \"Speaker seniority: 10pts (derived)\" as a scoring dimension.\n  // But the breakdown interface doesn't have a seniorityScore field.\n  // We'll add it to the total but report it through the existing dimensions.\n  // The spec breakdown fields are: keywordScore, personaScore, depthScore, heavyHitterBonus,\n  // goalRelevanceScore, networkingSignalScore, sectorScore, dealBreakerPenalty.\n  // Seniority is NOT in the breakdown interface - so we add it to the total directly.\n  const seniorityScore = computeSeniorityScore(event.speakers);\n\n  // Deal breaker penalty (negative)\n  const dealBreakerPenalty = computeDealBreakerPenalty(\n    event,\n    profile.dealBreakers\n  );\n\n  const totalScore = Math.max(\n    0,\n    keywordScore +\n      personaScore +\n      depthScore +\n      goalRelevanceScore +\n      networkingSignalScore +\n      sectorScore +\n      seniorityScore +\n      dealBreakerPenalty\n  );\n\n  return {\n    event,\n    score: totalScore,\n    breakdown: {\n      keywordScore,\n      personaScore,\n      depthScore,\n      heavyHitterBonus,\n      goalRelevanceScore,\n      networkingSignalScore,\n      sectorScore,\n      dealBreakerPenalty,\n    },\n    tier: 'Wildcard', // Assigned later during plan generation\n    isFallback: false,\n  };\n}\n\n/**\n * Score a single exhibitor against a user profile.\n */\nexport function scoreExhibitor(\n  exhibitor: Exhibitor,\n  profile: UserProfile\n): ScoredExhibitor {\n  // Keyword matching (60pts max)\n  const keywordScore = computeKeywordScore(\n    exhibitor.keywords,\n    profile.keywordInterests,\n    EXHIBITOR_MAX_KEYWORD_SCORE,\n    EXHIBITOR_EXACT_KEYWORD_POINTS,\n    EXHIBITOR_CATEGORY_KEYWORD_POINTS\n  );\n\n  // Persona matching (40pts max)\n  const personaScore = computePersonaScore(\n    exhibitor.target_personas,\n    profile.personaInterests,\n    EXHIBITOR_MAX_PERSONA_SCORE,\n    EXHIBITOR_EXACT_PERSONA_POINTS\n  );\n\n  return {\n    exhibitor,\n    score: keywordScore + personaScore,\n    breakdown: {\n      keywordScore,\n      personaScore,\n    },\n  };\n}\n\n/**\n * Assign tiers based on score rank within the final selected events.\n * Top 25% = \"Must Attend\", next 25% = \"Should Attend\",\n * next 25% = \"Nice to Have\", bottom 25% = \"Wildcard\".\n */\nfunction assignTiers(scoredEvents: ScoredEvent[]): ScoredEvent[] {\n  // Only assign tiers to primary (non-fallback) events\n  const primaries = scoredEvents.filter((e) => !e.isFallback);\n  const fallbacks = scoredEvents.filter((e) => e.isFallback);\n\n  // Sort primaries by score descending for tier assignment\n  const sorted = [...primaries].sort((a, b) => b.score - a.score);\n  const count = sorted.length;\n\n  const tierCutoffs: { threshold: number; tier: Tier }[] = [\n    { threshold: Math.ceil(count * 0.25), tier: 'Must Attend' },\n    { threshold: Math.ceil(count * 0.5), tier: 'Should Attend' },\n    { threshold: Math.ceil(count * 0.75), tier: 'Nice to Have' },\n    { threshold: count, tier: 'Wildcard' },\n  ];\n\n  for (let i = 0; i < sorted.length; i++) {\n    for (const cutoff of tierCutoffs) {\n      if (i < cutoff.threshold) {\n        sorted[i].tier = cutoff.tier;\n        break;\n      }\n    }\n  }\n\n  // Fallbacks always get \"Wildcard\" tier\n  for (const fb of fallbacks) {\n    fb.tier = 'Wildcard';\n  }\n\n  return [...sorted, ...fallbacks];\n}\n\n/**\n * Build an AlternativeEvent object from a ScoredEvent.\n */\nfunction toAlternativeEvent(se: ScoredEvent): AlternativeEvent {\n  return {\n    event_id: se.event.event_id,\n    title: se.event.title,\n    tier: 'Wildcard' as Tier, // Alternatives default to Wildcard\n    score: se.score,\n    venue: se.event.venue,\n    room: se.event.room,\n    one_liner: se.event.summary_one_liner,\n    start_time: se.event.start_time,\n    end_time: se.event.end_time,\n    speakers: se.event.speakers,\n    is_heavy_hitter: se.event.networking_signals.is_heavy_hitter,\n  };\n}\n\n/**\n * Convert a time string (\"HH:MM:SS\" or \"HH:MM\") to minutes since midnight.\n */\nfunction timeToMinutes(time: string): number {\n  const [h, m] = time.split(':').map(Number);\n  return h * 60 + m;\n}\n\n/**\n * Check if two events overlap in time.\n * Uses strict inequality so back-to-back events (11:30 end, 11:30 start)\n * are NOT considered overlapping — the user can attend both.\n * If end_time is missing, assumes 30-minute duration.\n */\nfunction timesOverlap(\n  startA: string, endA: string | null,\n  startB: string, endB: string | null,\n): boolean {\n  const aStart = timeToMinutes(startA);\n  const aEnd = endA ? timeToMinutes(endA) : aStart + 30;\n  const bStart = timeToMinutes(startB);\n  const bEnd = endB ? timeToMinutes(endB) : bStart + 30;\n\n  // Strict inequality: aStart < bEnd AND bStart < aEnd\n  return aStart < bEnd && bStart < aEnd;\n}\n\n/**\n * Resolve time conflicts within a single day using actual time overlap detection.\n *\n * Greedy approach:\n * 1. Sort events by score (highest first)\n * 2. Pick non-overlapping events as primaries (no per-day limit)\n * 3. Assign overlapping events as alternatives on the earliest overlapping primary\n * 4. Top alternative per slot becomes the fallback (P2)\n */\nfunction resolveConflicts(events: ScoredEvent[]): ScoredEvent[] {\n  if (events.length === 0) return [];\n\n  // Sort by score descending — greedy picks highest-value events first\n  const byScore = [...events].sort((a, b) => b.score - a.score);\n\n  const primaries: ScoredEvent[] = [];\n  const assigned = new Set<string>();\n\n  // Phase 1: Greedy non-overlapping primary selection\n  for (const se of byScore) {\n    const overlaps = primaries.some((p) =>\n      timesOverlap(\n        p.event.start_time, p.event.end_time,\n        se.event.start_time, se.event.end_time,\n      )\n    );\n\n    if (!overlaps) {\n      se.isFallback = false;\n      se.alternatives = [];\n      primaries.push(se);\n      assigned.add(se.event.event_id);\n    }\n  }\n\n  // Sort primaries chronologically for \"first overlapping slot\" assignment\n  primaries.sort((a, b) =>\n    a.event.start_time.localeCompare(b.event.start_time)\n  );\n\n  // Phase 2: Assign remaining events as alternatives to their\n  // first (earliest) overlapping primary\n  for (const se of byScore) {\n    if (assigned.has(se.event.event_id)) continue;\n\n    const overlappingPrimary = primaries.find((p) =>\n      timesOverlap(\n        p.event.start_time, p.event.end_time,\n        se.event.start_time, se.event.end_time,\n      )\n    );\n\n    if (\n      overlappingPrimary &&\n      overlappingPrimary.alternatives!.length < MAX_ALTERNATIVES_PER_SLOT\n    ) {\n      overlappingPrimary.alternatives!.push(toAlternativeEvent(se));\n      assigned.add(se.event.event_id);\n    }\n  }\n\n  // Build resolved array: primaries + their fallbacks (P2)\n  const resolved: ScoredEvent[] = [];\n\n  for (const primary of primaries) {\n    resolved.push(primary);\n\n    // Mark the top alternative as the fallback (P2)\n    if (primary.alternatives && primary.alternatives.length > 0) {\n      const topAltId = primary.alternatives[0].event_id;\n      const topAlt = byScore.find((se) => se.event.event_id === topAltId);\n\n      if (topAlt) {\n        topAlt.isFallback = true;\n        topAlt.fallbackFor = primary.event.event_id;\n        resolved.push(topAlt);\n      }\n    }\n  }\n\n  return resolved;\n}\n\n/**\n * Generate the full recommendation plan.\n *\n * 1. Score all events, filter out zeros\n * 2. Group by date, take top CANDIDATES_PER_DAY per day\n * 3. Greedy non-overlapping scheduling (no per-day cap)\n * 4. Overlapping events become alternatives with fallback (P2)\n * 5. Assign tiers\n * 6. Score top 5 exhibitors\n * 7. Return full plan\n */\nexport function generateRecommendations(\n  events: Event[],\n  exhibitors: Exhibitor[],\n  profile: UserProfile\n): RecommendationPlan {\n  // Step 1: Score all events and filter zeros\n  const scored = events\n    .map((e) => scoreEvent(e, profile))\n    .filter((se) => se.score > 0);\n\n  // Step 2: Group by date, take top candidates per day\n  const byDate = new Map<string, ScoredEvent[]>();\n  for (const se of scored) {\n    const date = se.event.date;\n    if (!byDate.has(date)) {\n      byDate.set(date, []);\n    }\n    byDate.get(date)!.push(se);\n  }\n\n  let allResolved: ScoredEvent[] = [];\n\n  for (const [, dayEvents] of byDate) {\n    // Sort by score, take top candidates for this day\n    dayEvents.sort((a, b) => b.score - a.score);\n    const dayCandidates = dayEvents.slice(0, CANDIDATES_PER_DAY);\n\n    // Greedy scheduling: picks all non-overlapping primaries,\n    // assigns overlapping events as alternatives — no per-day cap\n    const resolved = resolveConflicts(dayCandidates);\n    allResolved = [...allResolved, ...resolved];\n  }\n\n  // Step 5: Assign tiers\n  const tiered = assignTiers(allResolved);\n\n  // Build schedule grouped by date, sorted chronologically\n  const scheduleMap = new Map<string, ScoredEvent[]>();\n  for (const se of tiered) {\n    const date = se.event.date;\n    if (!scheduleMap.has(date)) {\n      scheduleMap.set(date, []);\n    }\n    scheduleMap.get(date)!.push(se);\n  }\n\n  const schedule: DaySchedule[] = Array.from(scheduleMap.entries())\n    .sort(([a], [b]) => a.localeCompare(b))\n    .map(([date, dayEvents]) => ({\n      date,\n      events: dayEvents.sort((a, b) =>\n        a.event.start_time.localeCompare(b.event.start_time)\n      ),\n    }));\n\n  // Step 6: Score and rank exhibitors\n  const scoredExhibitors = exhibitors\n    .map((ex) => scoreExhibitor(ex, profile))\n    .sort((a, b) => b.score - a.score)\n    .slice(0, TOP_EXHIBITORS);\n\n  // Step 7: Build the plan\n  const totalPrimary = tiered.filter((e) => !e.isFallback).length;\n\n  const headline = ROLE_HEADLINES[profile.role] || 'Your Personalized Track';\n  const strategyNote =\n    ROLE_STRATEGY_NOTES[profile.role] ||\n    'Your schedule has been optimized for the best networking opportunities at the summit.';\n\n  return {\n    headline,\n    strategyNote,\n    schedule,\n    exhibitors: scoredExhibitors,\n    totalEvents: totalPrimary,\n    profile,\n  };\n}\n","// ============================================================\n// AI Summit Strategist - Quiz Answer to Profile Mapper\n// ============================================================\n\nimport type { Keyword, UserProfile, UserRole } from './types';\n\n// --- Role Mapping ---\n// Each role maps to a default technical depth, relevant personas, and base keywords.\n\ninterface RoleMapping {\n  depth: number;\n  personas: string[];\n  keywords: Keyword[];\n}\n\nexport const ROLE_MAP: Record<UserRole, RoleMapping> = {\n  founder: {\n    depth: 3,\n    personas: [\n      'Early-Stage Founders',\n      'Growth-Stage Founders',\n      'Technical Founders',\n    ],\n    keywords: [\n      { category: 'Business & Entrepreneurship', keyword: 'Startups' },\n    ],\n  },\n  investor: {\n    depth: 2,\n    personas: ['Investors & Venture Capital', 'C-Suite Executives'],\n    keywords: [\n      { category: 'Business & Entrepreneurship', keyword: 'Venture Capital' },\n    ],\n  },\n  product: {\n    depth: 3,\n    personas: ['Product Managers', 'Innovation & Strategy Leaders'],\n    keywords: [\n      {\n        category: 'Digital Transformation & Services',\n        keyword: 'Digital Transformation',\n      },\n    ],\n  },\n  engineer: {\n    depth: 4,\n    personas: ['AI/ML Engineers', 'Backend Engineers', 'Data Scientists'],\n    keywords: [\n      {\n        category: 'AI Technology & Architecture',\n        keyword: 'AI Architecture',\n      },\n    ],\n  },\n  policy: {\n    depth: 2,\n    personas: ['Government & Policy Leaders', 'Policy & Regulatory Experts'],\n    keywords: [\n      { category: 'AI Governance & Ethics', keyword: 'AI Governance' },\n    ],\n  },\n  student: {\n    depth: 3,\n    personas: ['Students & Early Career', 'AI Researchers'],\n    keywords: [\n      { category: 'Skills & Workforce Development', keyword: 'AI Literacy' },\n    ],\n  },\n};\n\n// --- Focus Area Mapping ---\n// Each focus area adds domain-specific keywords to the profile.\n// Keys match the new quiz interest IDs from the expanded 9-step quiz.\n\nexport const FOCUS_MAP: Record<string, Keyword[]> = {\n  // New ID-based keys (from expanded quiz)\n  llms_foundation: [\n    { category: 'AI Technology & Architecture', keyword: 'Generative AI' },\n    {\n      category: 'AI Technology & Architecture',\n      keyword: 'Large Language Models',\n    },\n    { category: 'AI Technology & Architecture', keyword: 'Foundation Models' },\n  ],\n  agentic_ai: [\n    { category: 'AI Technology & Architecture', keyword: 'Agentic AI' },\n    { category: 'AI Technology & Architecture', keyword: 'Autonomous Systems' },\n  ],\n  compute_infra: [\n    { category: 'Data & Infrastructure', keyword: 'Cloud Computing' },\n    { category: 'Data & Infrastructure', keyword: 'Semiconductor' },\n    { category: 'Data & Infrastructure', keyword: 'AI Infrastructure' },\n  ],\n  safety_governance: [\n    { category: 'AI Governance & Ethics', keyword: 'AI Safety' },\n    { category: 'AI Governance & Ethics', keyword: 'Responsible AI' },\n    { category: 'AI Governance & Ethics', keyword: 'Ethical AI' },\n  ],\n  startups_vc: [\n    { category: 'Business & Entrepreneurship', keyword: 'Startups' },\n    { category: 'Business & Entrepreneurship', keyword: 'Venture Capital' },\n    { category: 'Research & Innovation', keyword: 'Innovation' },\n  ],\n  enterprise_ai: [\n    { category: 'Industry Applications', keyword: 'Enterprise AI' },\n    {\n      category: 'Digital Transformation & Services',\n      keyword: 'Digital Transformation',\n    },\n    { category: 'Data & Infrastructure', keyword: 'Cloud Computing' },\n  ],\n  health_agri_impact: [\n    { category: 'Social Impact & Inclusion', keyword: 'Social Impact' },\n    { category: 'Social Impact & Inclusion', keyword: 'Education' },\n    { category: 'Geopolitics & Global Strategy', keyword: 'Global South' },\n  ],\n  geopolitics: [\n    { category: 'Geopolitics & Global Strategy', keyword: 'Global South' },\n    {\n      category: 'Geopolitics & Global Strategy',\n      keyword: 'Digital Sovereignty',\n    },\n    { category: 'AI Governance & Ethics', keyword: 'AI Governance' },\n  ],\n\n  // Legacy label-based keys (backward compatibility with old quiz)\n  'LLMs & GenAI': [\n    { category: 'AI Technology & Architecture', keyword: 'Generative AI' },\n    {\n      category: 'AI Technology & Architecture',\n      keyword: 'Large Language Models',\n    },\n    { category: 'AI Technology & Architecture', keyword: 'Foundation Models' },\n  ],\n  'Compute, Cloud & Infra': [\n    { category: 'Data & Infrastructure', keyword: 'Cloud Computing' },\n    { category: 'Data & Infrastructure', keyword: 'Semiconductor' },\n    { category: 'Data & Infrastructure', keyword: 'AI Infrastructure' },\n  ],\n  'Ethics, Safety & Governance': [\n    { category: 'AI Governance & Ethics', keyword: 'AI Safety' },\n    { category: 'AI Governance & Ethics', keyword: 'Responsible AI' },\n    { category: 'AI Governance & Ethics', keyword: 'Ethical AI' },\n  ],\n  'Startups & Venture Capital': [\n    { category: 'Business & Entrepreneurship', keyword: 'Startups' },\n    { category: 'Business & Entrepreneurship', keyword: 'Venture Capital' },\n    { category: 'Research & Innovation', keyword: 'Innovation' },\n  ],\n  'Enterprise Adoption': [\n    { category: 'Industry Applications', keyword: 'Enterprise AI' },\n    {\n      category: 'Digital Transformation & Services',\n      keyword: 'Digital Transformation',\n    },\n    { category: 'Data & Infrastructure', keyword: 'Cloud Computing' },\n  ],\n  'Social Impact': [\n    { category: 'Social Impact & Inclusion', keyword: 'Social Impact' },\n    { category: 'Social Impact & Inclusion', keyword: 'Education' },\n    { category: 'Geopolitics & Global Strategy', keyword: 'Global South' },\n  ],\n};\n\n// --- Mission Mapping ---\n// Each mission adds goal-oriented keywords to the profile.\n\nexport const MISSION_MAP: Record<string, Keyword[]> = {\n  // New ID-based keys (from expanded quiz)\n  hiring: [\n    {\n      category: 'Skills & Workforce Development',\n      keyword: 'Talent Development',\n    },\n  ],\n  fundraising: [\n    { category: 'Business & Entrepreneurship', keyword: 'Venture Capital' },\n    { category: 'Business & Entrepreneurship', keyword: 'Startups' },\n  ],\n  sales: [\n    { category: 'Industry Applications', keyword: 'Enterprise AI' },\n    {\n      category: 'Digital Transformation & Services',\n      keyword: 'Digital Transformation',\n    },\n  ],\n  upskilling: [\n    { category: 'Skills & Workforce Development', keyword: 'AI Literacy' },\n    { category: 'Research & Innovation', keyword: 'AI Research' },\n  ],\n  networking: [\n    // No additional keywords. The \"Networking\" mission signals intent to\n    // prioritize heavy hitter events, which is handled by the scoring engine's\n    // networking signal scoring. No extra keyword injection needed.\n  ],\n\n  // Legacy label-based keys (backward compatibility with old quiz)\n  'Finding Talent': [\n    {\n      category: 'Skills & Workforce Development',\n      keyword: 'Talent Development',\n    },\n  ],\n  Fundraising: [\n    { category: 'Business & Entrepreneurship', keyword: 'Venture Capital' },\n    { category: 'Business & Entrepreneurship', keyword: 'Startups' },\n  ],\n  'Finding Customers': [\n    { category: 'Industry Applications', keyword: 'Enterprise AI' },\n    {\n      category: 'Digital Transformation & Services',\n      keyword: 'Digital Transformation',\n    },\n  ],\n  'Deep Learning': [\n    { category: 'Skills & Workforce Development', keyword: 'AI Literacy' },\n    { category: 'Research & Innovation', keyword: 'AI Research' },\n  ],\n  Networking: [\n    // No additional keywords - see networking above.\n  ],\n};\n\n// --- Sector Mapping ---\n// Maps sector IDs from expanded quiz step 8 to keyword interests.\n\nexport const SECTOR_MAP: Record<string, Keyword[]> = {\n  developer_tools: [\n    { category: 'AI Technology & Architecture', keyword: 'Developer Tools' },\n    { category: 'AI Technology & Architecture', keyword: 'AI Architecture' },\n  ],\n  fintech: [\n    { category: 'Business & Entrepreneurship', keyword: 'FinTech' },\n    { category: 'Industry Applications', keyword: 'Financial Services' },\n  ],\n  healthcare: [\n    { category: 'Social Impact & Inclusion', keyword: 'Healthcare AI' },\n  ],\n  ecommerce: [\n    { category: 'Industry Applications', keyword: 'E-Commerce' },\n    { category: 'Industry Applications', keyword: 'Retail' },\n  ],\n  edtech: [\n    { category: 'Skills & Workforce Development', keyword: 'EdTech' },\n    { category: 'Social Impact & Inclusion', keyword: 'Education' },\n  ],\n  manufacturing: [\n    { category: 'Industry Applications', keyword: 'Manufacturing' },\n  ],\n  agriculture: [\n    { category: 'Social Impact & Inclusion', keyword: 'AgriTech' },\n  ],\n  defense: [\n    { category: 'Geopolitics & Global Strategy', keyword: 'Defense' },\n    { category: 'Geopolitics & Global Strategy', keyword: 'Cybersecurity' },\n  ],\n  media: [\n    { category: 'Digital Transformation & Services', keyword: 'Media' },\n    { category: 'Digital Transformation & Services', keyword: 'Entertainment' },\n  ],\n  government: [\n    { category: 'AI Governance & Ethics', keyword: 'AI Governance' },\n    { category: 'AI Governance & Ethics', keyword: 'Public Sector' },\n  ],\n};\n\n// --- Deduplication Helper ---\n\n/**\n * Deduplicate keywords by (category, keyword) pair (case-insensitive).\n */\nfunction deduplicateKeywords(keywords: Keyword[]): Keyword[] {\n  const seen = new Set<string>();\n  const result: Keyword[] = [];\n\n  for (const kw of keywords) {\n    const key = `${kw.category.toLowerCase()}::${kw.keyword.toLowerCase()}`;\n    if (!seen.has(key)) {\n      seen.add(key);\n      result.push(kw);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Deduplicate persona strings (case-insensitive).\n */\nfunction deduplicatePersonas(personas: string[]): string[] {\n  const seen = new Set<string>();\n  const result: string[] = [];\n\n  for (const p of personas) {\n    const key = p.toLowerCase();\n    if (!seen.has(key)) {\n      seen.add(key);\n      result.push(p);\n    }\n  }\n\n  return result;\n}\n\n// --- Main Builder ---\n\n/**\n * Build a full UserProfile from quiz answers.\n *\n * @param role - The user's self-identified role\n * @param focusAreas - Up to 3 selected focus areas (new IDs or legacy labels)\n * @param missions - Up to 2 selected missions (new IDs or legacy labels)\n * @param availableDates - Array of date strings the user plans to attend\n * @param name - Optional user name\n * @param technicalDepth - Optional explicit technical depth override (from step 5); if null/undefined, uses role-inferred depth\n * @param networkingDensity - Optional networking style preference (from step 6)\n * @param orgSize - Optional organization size (from step 7)\n * @param sectors - Optional sector selections (from step 8)\n * @param dealBreakers - Optional deal breaker selections (from step 9)\n * @returns A fully populated UserProfile ready for the scoring engine\n */\nexport function buildProfileFromQuiz(\n  role: UserRole,\n  focusAreas: string[],\n  missions: string[],\n  availableDates: string[],\n  name?: string,\n  technicalDepth?: number | null,\n  networkingDensity?: 'high_power' | 'high_volume' | 'balanced' | null,\n  orgSize?: string | null,\n  sectors?: string[] | null,\n  dealBreakers?: string[] | null,\n): UserProfile {\n  const roleMapping = ROLE_MAP[role];\n\n  // Start with role-based keywords\n  const allKeywords: Keyword[] = [...roleMapping.keywords];\n\n  // Add focus area keywords\n  for (const focus of focusAreas) {\n    const focusKeywords = FOCUS_MAP[focus];\n    if (focusKeywords) {\n      allKeywords.push(...focusKeywords);\n    }\n  }\n\n  // Add mission keywords\n  for (const mission of missions) {\n    const missionKeywords = MISSION_MAP[mission];\n    if (missionKeywords) {\n      allKeywords.push(...missionKeywords);\n    }\n  }\n\n  // Add sector keywords\n  if (sectors && sectors.length > 0) {\n    for (const sector of sectors) {\n      const sectorKeywords = SECTOR_MAP[sector];\n      if (sectorKeywords) {\n        allKeywords.push(...sectorKeywords);\n      }\n    }\n  }\n\n  // Build personas from role mapping\n  const allPersonas: string[] = [...roleMapping.personas];\n\n  // Determine technical depth: use explicit override if provided, otherwise role-inferred\n  const effectiveDepth =\n    technicalDepth != null ? technicalDepth : roleMapping.depth;\n\n  return {\n    name: name || undefined,\n    role,\n    focusAreas,\n    missions,\n    availableDates,\n    technicalDepthPreference: effectiveDepth,\n    keywordInterests: deduplicateKeywords(allKeywords),\n    personaInterests: deduplicatePersonas(allPersonas),\n    networkingDensity: networkingDensity || undefined,\n    orgSize: orgSize || undefined,\n    sectors: sectors || undefined,\n    dealBreakers: dealBreakers || undefined,\n  };\n}\n","/** Shared constants across pages. */\n\n/** Technical depth border colors (index 0-4 maps to depth 1-5). */\nexport const DEPTH_COLORS = ['#A8A29E', '#D97706', '#4338CA', '#6D28D9', '#BE123C'];\n\n/** Role label map for display. */\nexport const ROLE_LABEL_MAP: Record<string, string> = {\n  'founder-cxo': 'Founder / CXO',\n  'investor-vc': 'Investor / VC',\n  'product-leader': 'Product Leader',\n  'engineer-researcher': 'Engineer / Researcher',\n  'policy-government': 'Policy / Government',\n  'student-academic': 'Student / Academic',\n};\n\n/** Networking density label map. */\nexport const DENSITY_LABEL_MAP: Record<string, string> = {\n  high_power: 'high-power networking rooms',\n  high_volume: 'high-volume conference halls',\n  balanced: 'balanced mix of sessions',\n};\n\n/** Interest ID → display label map. */\nexport const INTEREST_LABEL_MAP: Record<string, string> = {\n  llms_foundation: 'LLMs & Foundation Models',\n  agentic_ai: 'Agentic AI & Autonomous Systems',\n  compute_infra: 'Compute, Cloud & Infrastructure',\n  safety_governance: 'AI Safety & Governance',\n  startups_vc: 'Startups & Venture Capital',\n  enterprise_ai: 'Enterprise AI Adoption',\n  health_agri_impact: 'Health, Agri & Social Impact',\n  geopolitics: 'Geopolitics & Global AI Policy',\n};\n\n/** Mission ID → display label map. */\nexport const MISSION_LABEL_MAP: Record<string, string> = {\n  hiring: 'Finding Talent',\n  fundraising: 'Fundraising',\n  sales: 'Finding Customers',\n  upskilling: 'Deep Learning',\n  networking: 'Networking',\n};\n\n/** Explore page topic categories with emoji and keywords. */\nexport const TOPIC_CATEGORIES: Record<string, { emoji: string; keywords: string[] }> = {\n  'AI Governance & Policy': { emoji: '🏛️', keywords: ['governance', 'policy', 'regulation'] },\n  'LLMs & Foundation Models': { emoji: '🧠', keywords: ['llm', 'foundation model', 'generative'] },\n  'Responsible & Ethical AI': { emoji: '⚖️', keywords: ['responsible', 'ethical', 'bias', 'fairness'] },\n  'AI Safety': { emoji: '🛡️', keywords: ['safety', 'alignment', 'risk'] },\n  'Healthcare & Biotech': { emoji: '🏥', keywords: ['health', 'medical', 'biotech', 'genomic'] },\n  'Agriculture & Climate': { emoji: '🌾', keywords: ['agriculture', 'agri', 'climate', 'sustainability'] },\n  'Education & Skilling': { emoji: '📚', keywords: ['education', 'skilling', 'learning', 'academic'] },\n  'Startups & Venture Capital': { emoji: '🚀', keywords: ['startup', 'venture', 'funding', 'entrepreneur'] },\n  'Enterprise & Industry': { emoji: '🏢', keywords: ['enterprise', 'industry', 'adoption', 'digital transformation'] },\n  'Compute & Infrastructure': { emoji: '⚡', keywords: ['compute', 'infrastructure', 'cloud', 'hardware'] },\n  'Global South & Inclusion': { emoji: '🌍', keywords: ['global south', 'inclusion', 'developing', 'digital public'] },\n  'Defense & Security': { emoji: '🔒', keywords: ['defense', 'security', 'cyber', 'military'] },\n};\n"],"names":[],"mappings":"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"}